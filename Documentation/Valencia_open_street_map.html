<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pablo Leon">
<meta name="dcterms.date" content="2021-05-22">

<title>OpenStreet maps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Valencia_open_street_map_files/libs/clipboard/clipboard.min.js"></script>
<script src="Valencia_open_street_map_files/libs/quarto-html/quarto.js"></script>
<script src="Valencia_open_street_map_files/libs/quarto-html/popper.min.js"></script>
<script src="Valencia_open_street_map_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Valencia_open_street_map_files/libs/quarto-html/anchor.min.js"></script>
<link href="Valencia_open_street_map_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Valencia_open_street_map_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Valencia_open_street_map_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Valencia_open_street_map_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Valencia_open_street_map_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OpenStreet maps</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pablo Leon </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 22, 2021</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="open-street-maps" class="level2">
<h2 class="anchored" data-anchor-id="open-street-maps">Open street maps</h2>
<p>This is a project to build maps with global open access mapping data using OSMDATA package in R.</p>
<p><a href="https://docs.ropensci.org/osmdata/articles/osmdata.html" class="uri">https://docs.ropensci.org/osmdata/articles/osmdata.html</a>.</p>
<p>From the package website, they explain that working with open access map data, ensures transparent data provenance and ownership, allowing anyone to contribute, encouraging democratic decision making and citizen science.</p>
</section>
<section id="working-with-vector-data" class="level2">
<h2 class="anchored" data-anchor-id="working-with-vector-data">Working with vector data</h2>
<p>Unlike the OpenStreetMap package <a href="https://github.com/ifellows/ROSM" class="uri">https://github.com/ifellows/ROSM</a>, which facilitates the download of raster files, <strong>osmdata</strong> provides access to the vector data underlying OSM</p>
</section>
<section id="install-and-load-osmdata-package-from-cran" class="level2">
<h2 class="anchored" data-anchor-id="install-and-load-osmdata-package-from-cran">Install and load OSMDATA package from CRAN</h2>
<p>To start working with Open OpenStreetMap package, install it from CRAN</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("osmdata",dependencies = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And then load it the usual way</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'osmdata' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright</code></pre>
</div>
</div>
<p>Load also extra libraries for data wrangling and to create plots</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(here,tidyverse,osmdata,sf,showtext)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>echo: false</code> option disables the printing of code (only output is displayed).</p>
</section>
<section id="creating-maps-using-getbb" class="level2">
<h2 class="anchored" data-anchor-id="creating-maps-using-getbb">Creating maps using getbb</h2>
<p>When building maps using OpenStreetMap, we can think about them in similar terms as ggplot2 plots, in the sense we build them step by step, adding one layer at a time to display the required information on top of the initial map of the region we want to create a map from.</p>
<p>Having selected the city we want to plot, then we use getbb() function to obtain a bounding box for a given place name. In this instance I will plot the city of Valencia in Spain.</p>
<p>getbb() function will provide me with the latitude and longitude coordinates that define Valencia in our map</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getbb</span>(<span class="st">"Valencia Spain"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         min        max
x -0.4325512 -0.2725205
y 39.2784496 39.5666089</code></pre>
</div>
</div>
</section>
<section id="select-your-reagion-and-add-one-feature" class="level2">
<h2 class="anchored" data-anchor-id="select-your-reagion-and-add-one-feature">1. Select your reagion and add one feature</h2>
<p>Now that I want to plot a map of Valencia I need to choose which features do I want to plot. Each feature is defined by a key and each key is sub-divided into further values.</p>
<p>For example, if I want to start plotting roads or highways into my map, I need to first identify how roads are defined in osmdata package. For that we use available_features() function to choose different roads or transportation routes defined in the map</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">available_features</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "4wd_only"                    "abandoned"                  
  [3] "abutters"                    "access"                     
  [5] "addr"                        "addr:city"                  
  [7] "addr:conscriptionnumber"     "addr:country"               
  [9] "addr:county"                 "addr:district"              
 [11] "addr:flats"                  "addr:full"                  
 [13] "addr:hamlet"                 "addr:housename"             
 [15] "addr:housenumber"            "addr:inclusion"             
 [17] "addr:interpolation"          "addr:place"                 
 [19] "addr:postbox"                "addr:postcode"              
 [21] "addr:province"               "addr:state"                 
 [23] "addr:street"                 "addr:subdistrict"           
 [25] "addr:suburb"                 "addr:unit"                  
 [27] "admin_level"                 "aeroway"                    
 [29] "agricultural"                "alt_name"                   
 [31] "amenity"                     "area"                       
 [33] "atv"                         "backward"                   
 [35] "barrier"                     "basin"                      
 [37] "bdouble"                     "bicycle"                    
 [39] "bicycle_road"                "biergarten"                 
 [41] "boat"                        "border_type"                
 [43] "boundary"                    "brand"                      
 [45] "bridge"                      "building"                   
 [47] "building:colour"             "building:fireproof"         
 [49] "building:flats"              "building:levels"            
 [51] "building:material"           "building:min_level"         
 [53] "building:part"               "building:soft_storey"       
 [55] "bus_bay"                     "busway"                     
 [57] "capacity"                    "castle_type"                
 [59] "change"                      "charge"                     
 [61] "clothes"                     "construction"               
 [63] "construction#Railways"       "covered"                    
 [65] "craft"                       "crossing"                   
 [67] "crossing:island"             "cuisine"                    
 [69] "cutting"                     "cycleway"                   
 [71] "denomination"                "destination"                
 [73] "diet:*"                      "direction"                  
 [75] "dispensing"                  "disused"                    
 [77] "drinking_water"              "drive_in"                   
 [79] "drive_through"               "ele"                        
 [81] "electric_bicycle"            "electrified"                
 [83] "embankment"                  "embedded_rails"             
 [85] "emergency"                   "end_date"                   
 [87] "entrance"                    "est_width"                  
 [89] "fee"                         "female"                     
 [91] "fire_object:type"            "fire_operator"              
 [93] "fire_rank"                   "foot"                       
 [95] "footway"                     "ford"                       
 [97] "forestry"                    "forward"                    
 [99] "frequency"                   "fuel"                       
[101] "gauge"                       "golf_cart"                  
[103] "goods"                       "hazard"                     
[105] "hazmat"                      "healthcare"                 
[107] "healthcare:counselling"      "healthcare:speciality"      
[109] "height"                      "hgv"                        
[111] "highway"                     "historic"                   
[113] "horse"                       "hot_water"                  
[115] "ice_road"                    "incline"                    
[117] "industrial"                  "inline_skates"              
[119] "inscription"                 "int_name"                   
[121] "internet_access"             "junction"                   
[123] "kerb"                        "landuse"                    
[125] "lanes"                       "lanes:bus"                  
[127] "lanes:psv"                   "layer"                      
[129] "leaf_cycle"                  "leaf_type"                  
[131] "leisure"                     "lhv"                        
[133] "lit"                         "loc_name"                   
[135] "location"                    "male"                       
[137] "man_made"                    "max_level"                  
[139] "maxaxleload"                 "maxheight"                  
[141] "maxlength"                   "maxspeed"                   
[143] "maxstay"                     "maxweight"                  
[145] "maxwidth"                    "military"                   
[147] "min_age"                     "min_level"                  
[149] "minspeed"                    "mofa"                       
[151] "moped"                       "motor_vehicle"              
[153] "motorboat"                   "motorcar"                   
[155] "motorcycle"                  "motorroad"                  
[157] "mountain_pass"               "mtb:description"            
[159] "mtb:scale"                   "name"                       
[161] "name:left"                   "name:right"                 
[163] "name_1"                      "name_2"                     
[165] "narrow"                      "nat_name"                   
[167] "natural"                     "noexit"                     
[169] "non_existent_levels"         "nudism"                     
[171] "office"                      "official_name"              
[173] "old_name"                    "oneway"                     
[175] "opening_hours"               "opening_hours:drive_through"
[177] "operator"                    "orientation"                
[179] "oven"                        "overtaking"                 
[181] "parking"                     "parking:condition"          
[183] "parking:lane"                "passing_places"             
[185] "place"                       "power"                      
[187] "power_supply"                "priority"                   
[189] "priority_road"               "produce"                    
[191] "proposed"                    "protected_area"             
[193] "psv"                         "public_transport"           
[195] "railway"                     "railway:preserved"          
[197] "railway:track_ref"           "recycling_type"             
[199] "ref"                         "reg_name"                   
[201] "religion"                    "rental"                     
[203] "residential"                 "roadtrain"                  
[205] "route"                       "sac_scale"                  
[207] "sauna"                       "service"                    
[209] "service_times"               "shelter_type"               
[211] "shop"                        "short_name"                 
[213] "shower"                      "sidewalk"                   
[215] "site"                        "ski"                        
[217] "smoothness"                  "social_facility"            
[219] "sorting_name"                "speed_pedelec"              
[221] "start_date"                  "step_count"                 
[223] "substation"                  "surface"                    
[225] "tactile_paving"              "tank"                       
[227] "tidal"                       "toilets"                    
[229] "toilets:wheelchair"          "toll"                       
[231] "topless"                     "tourism"                    
[233] "tracks"                      "tracktype"                  
[235] "traffic_calming"             "traffic_sign"               
[237] "trail_visibility"            "trailblazed"                
[239] "trailblazed:visibility"      "tunnel"                     
[241] "turn"                        "type"                       
[243] "unisex"                      "usage"                      
[245] "vehicle"                     "vending"                    
[247] "voltage"                     "water"                      
[249] "wheelchair"                  "wholesale"                  
[251] "width"                       "winter_road"                
[253] "wood"                       </code></pre>
</div>
</div>
<p>From the above list of features I can see “highway” as available key, so now I need to know which specific values are linked to that key. For tha I will use available_tags() function, to find out which values are related to the key “highway”</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">available_tags</span>(<span class="st">"highway"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "bridleway"              "bus_guideway"           "bus_stop"              
 [4] "busway"                 "construction"           "corridor"              
 [7] "crossing"               "cycleway"               "elevator"              
[10] "emergency_access_point" "emergency_bay"          "escape"                
[13] "footway"                "give_way"               "living_street"         
[16] "milestone"              "mini_roundabout"        "motorway"              
[19] "motorway_junction"      "motorway_link"          "passing_place"         
[22] "path"                   "pedestrian"             "platform"              
[25] "primary"                "primary_link"           "proposed"              
[28] "raceway"                "residential"            "rest_area"             
[31] "road"                   "secondary"              "secondary_link"        
[34] "service"                "services"               "speed_camera"          
[37] "steps"                  "stop"                   "street_lamp"           
[40] "tertiary"               "tertiary_link"          "toll_gantry"           
[43] "track"                  "traffic_mirror"         "traffic_signals"       
[46] "trailhead"              "trunk"                  "trunk_link"            
[49] "turning_circle"         "turning_loop"           "unclassified"          
[52] "via_ferrata"           </code></pre>
</div>
</div>
<p>As I want to start by plotting the main roads in the city of Valencia, i will choose a handful of the above tags: motorway, primary, secondary, tertiary,residential,living_street, unclassified.</p>
</section>
<section id="choosing-elements-for-map-first-layer" class="level2">
<h2 class="anchored" data-anchor-id="choosing-elements-for-map-first-layer">2. Choosing elements for map first layer</h2>
<p>We name each layer with the key and values we want to plot in the map. So for this first example, I want to see several types of roads in the region of Valencia</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MAP LAYER 01: roads  </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span> <span class="fu">getbb</span>(<span class="st">"Valencia Spain"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">opq</span>(<span class="at">timeout =</span>  <span class="dv">3500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">add_osm_feature</span>(<span class="at">key =</span> <span class="st">"highway"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> <span class="fu">c</span>(<span class="st">"motorway"</span>,<span class="st">"primary"</span>,<span class="st">"secondary"</span>,<span class="st">"tertiary"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"residential"</span>,<span class="st">"living_street"</span>,<span class="st">"unclassified"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">osmdata_sf</span>()</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>roads</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Object of class 'osmdata' with:
                 $bbox : 39.2784496,-0.4325512,39.5666089,-0.2725205
        $overpass_call : The call submitted to the overpass API
                 $meta : metadata including timestamp and version numbers
           $osm_points : 'sf' Simple Features Collection with 71931 points
            $osm_lines : 'sf' Simple Features Collection with 15166 linestrings
         $osm_polygons : 'sf' Simple Features Collection with 433 polygons
       $osm_multilines : NULL
    $osm_multipolygons : NULL</code></pre>
</div>
</div>
</section>
<section id="initial-valencia-city-map-showing-roads-and-highways" class="level2">
<h2 class="anchored" data-anchor-id="initial-valencia-city-map-showing-roads-and-highways">3. Initial Valencia city map showing roads and highways</h2>
<p>Using ggplot2, we use the sf cartographic object we queried from the OpenMap API, mapping sevral sf objects via ggplot2 and geom_sf() functions.</p>
<p>Also, It is in this step where we make use of getbb(“Valencia Spain”) function, to ensure the features we match the specific latitude and longitude of the city we want to plot.</p>
<p>We have created so far just one geom_sf() object, we include it within the ggplot() function alongside the lat and long coordinated of Valencia.</p>
<p>Prior to producing the final map, we define the color palette for each new feature</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>road_color <span class="ot">&lt;-</span> <span class="st">'#000000'</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>coastline_color <span class="ot">&lt;-</span> <span class="st">'#000000'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then we can combine all previous scripts to create our first map</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Valencia_roads_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_sf</span>(<span class="at">data =</span> roads<span class="sc">$</span>osm_lines,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color =</span> road_color) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.4325512</span>, <span class="sc">-</span><span class="fl">0.2725205</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                           <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">39.2784496</span>, <span class="fl">39.5666089</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">expand =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>Valencia_roads_map</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Valencia_open_street_map_files/figure-html/Valencia%20road%20map-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>